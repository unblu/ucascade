<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1452px" preserveAspectRatio="none" style="width:1182px;height:1452px;" version="1.1" viewBox="0 0 1182 1452" width="1182px" zoomAndPan="magnify"><defs><filter height="300%" id="funpxnbxbf101" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="815.875" cy="20" fill="#000000" filter="url(#funpxnbxbf101)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="351" x="640.375" y="190.8047"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="331" x="650.375" y="211.9434">fetch properties from the MergeRequestEvent object</text><rect fill="#FEFECE" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="331" x="650.375" y="244.7734"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="311" x="660.375" y="265.9121">try to read nextMainBranch from configuration file</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="728.875,298.7422,902.875,298.7422,914.875,310.7422,902.875,322.7422,728.875,322.7422,716.875,310.7422,728.875,298.7422" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="174" x="728.875" y="314.5503">nextMainBranch is configured?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="696.875" y="308.1479">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="914.875" y="308.1479">no</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="481.25,332.7422,669.25,332.7422,681.25,344.7422,669.25,356.7422,481.25,356.7422,469.25,344.7422,481.25,332.7422" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="188" x="481.25" y="348.5503">nextMainBranch exists remotely?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="449.25" y="342.1479">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="681.25" y="342.1479">no</text><rect fill="#FEFECE" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="257" x="113" y="366.7422"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="237" x="123" y="387.8809">create new branch from targetBranch</text><rect fill="#FEFECE" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="403" x="40" y="420.7109"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="383" x="50" y="441.8496">create new MR from the new branch into the nextMainBranch</text><rect fill="#FEFECE" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="406" x="38.5" y="523.082"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="386" x="48.5" y="544.2207">approve the just created MR as that user (apiTokenApprover)</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="169.5,474.6797,313.5,474.6797,325.5,486.6797,313.5,498.6797,169.5,498.6797,157.5,486.6797,169.5,474.6797" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="245.5" y="508.8901">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="169.5" y="490.4878">apiTokenApprover is set?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="325.5" y="484.0854">no</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="241.5,577.0508,253.5,589.0508,241.5,601.0508,229.5,589.0508,241.5,577.0508" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M355.5,617.9023 L355.5,634.0352 L335.5,638.0352 L355.5,642.0352 L355.5,658.168 A0,0 0 0 0 355.5,658.168 L595.5,658.168 A0,0 0 0 0 595.5,658.168 L595.5,627.9023 L585.5,617.9023 L355.5,617.9023 A0,0 0 0 0 355.5,617.9023 " fill="#FBFB77" filter="url(#funpxnbxbf101)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M585.5,617.9023 L585.5,627.9023 L595.5,627.9023 L585.5,617.9023 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="361.5" y="634.9692">Timeout to avoid the possibility</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="361.5" y="650.1021">of getting stuck in the loop forever</text><rect fill="#87CEEB" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="188" x="147.5" y="621.0508"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="168" x="157.5" y="642.1895">initialize countDown to 100</text><rect fill="#87CEEB" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="192" x="145.5" y="733.8784"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="172" x="155.5" y="755.0171">decrement countDown by 1</text><path d="M311.5,801.1636 L311.5,809.73 L291.5,813.73 L311.5,817.73 L311.5,826.2964 A0,0 0 0 0 311.5,826.2964 L515.5,826.2964 A0,0 0 0 0 515.5,826.2964 L515.5,811.1636 L505.5,801.1636 L311.5,801.1636 A0,0 0 0 0 311.5,801.1636 " fill="#FBFB77" filter="url(#funpxnbxbf101)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M505.5,801.1636 L505.5,811.1636 L515.5,811.1636 L505.5,801.1636 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="317.5" y="818.2305">Wait for Gitlab to prepare MR</text><rect fill="#FEFECE" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="191.5" y="796.7456"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="80" x="201.5" y="817.8843">sleep 100ms</text><rect fill="#FEFECE" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="200" x="141.5" y="850.7144"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="180" x="151.5" y="871.853">update MRStatus from Gitlab</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="116.5,678.168,366.5,678.168,378.5,690.168,366.5,702.168,116.5,702.168,104.5,690.168,116.5,678.168" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="245.5" y="712.3784">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="250" x="116.5" y="693.9761">MRStatus is "checking" and countdown &gt; 0?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="90.5" y="687.5737">no</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="194,926.6831,289,926.6831,301,938.6831,289,950.6831,194,950.6831,182,938.6831,194,926.6831" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="194" y="942.4912">countDown == 0</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="162" y="936.0889">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="301" y="936.0889">no</text><rect fill="#FEFECE" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="10" y="960.6831"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="31" x="20" y="981.8218">error</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="353,960.6831,542,960.6831,554,972.6831,542,984.6831,353,984.6831,341,972.6831,353,960.6831" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="353" y="976.4912">Is MRStatus == can_be_merged?</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="241,1007.4878,351,1007.4878,363,1019.4878,351,1031.4878,241,1031.4878,229,1019.4878,241,1007.4878" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="110" x="241" y="1023.2959">MR has pipeline(s)?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="209" y="1016.8936">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="363" y="1016.8936">no</text><rect fill="#FEFECE" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="91" y="1041.4878"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="194" x="101" y="1062.6265">merge when pipeline succeeds</text><rect fill="#FEFECE" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="325" y="1041.4878"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="118" x="335" y="1062.6265">merge immediately</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="296,1081.4565,308,1093.4565,296,1105.4565,284,1093.4565,296,1081.4565" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="269" x="519" y="1068.2925"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="249" x="529" y="1089.4312">get user that merged the preceding MR</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="622.5,1007.4878,684.5,1007.4878,696.5,1019.4878,684.5,1031.4878,622.5,1031.4878,610.5,1019.4878,622.5,1007.4878" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="657.5" y="1041.6982">ucascade user</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="622.5" y="1023.2959">MR merger</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="482.5" y="1016.8936">not the ucascade user</text><rect fill="#FEFECE" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="321" x="493" y="1146.2612"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="301" x="503" y="1167.3999">update MR to set its assignee to the MR merger</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="447.5,1190.23,447.5,1190.23,459.5,1202.23,447.5,1214.23,447.5,1214.23,435.5,1202.23,447.5,1190.23" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="241.5,1220.23,253.5,1232.23,241.5,1244.23,229.5,1232.23,241.5,1220.23" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FF0000" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="844" y="366.7422"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="110" x="854" y="387.8809">discard with error</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="575.25,1250.23,587.25,1262.23,575.25,1274.23,563.25,1262.23,575.25,1250.23" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#funpxnbxbf101)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="1001.375" y="332.7422"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="1011.375" y="353.8809">nothing to do</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="815.875,1280.23,827.875,1292.23,815.875,1304.23,803.875,1292.23,815.875,1280.23" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="665.875,142.4023,965.875,142.4023,977.875,154.4023,965.875,166.4023,665.875,166.4023,653.875,154.4023,665.875,142.4023" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="819.875" y="176.6128">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="300" x="665.875" y="158.2104">request is valid and corresponds to a merge action?</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="815.875,1324.23,827.875,1336.23,815.875,1348.23,803.875,1336.23,815.875,1324.23" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="763.375,94,868.375,94,880.375,106,868.375,118,763.375,118,751.375,106,763.375,94" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="819.875" y="128.2104">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="763.375" y="109.8081">incoming request?</text><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="815.875,1368.23,827.875,1380.23,815.875,1392.23,803.875,1380.23,815.875,1368.23" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#funpxnbxbf101)" points="815.875,50,827.875,62,815.875,74,803.875,62,815.875,50" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="815.875" x2="815.875" y1="224.7734" y2="244.7734"/><polygon fill="#A80036" points="811.875,234.7734,815.875,244.7734,819.875,234.7734,815.875,238.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="400.7109" y2="420.7109"/><polygon fill="#A80036" points="237.5,410.7109,241.5,420.7109,245.5,410.7109,241.5,414.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="498.6797" y2="523.082"/><polygon fill="#A80036" points="237.5,513.082,241.5,523.082,245.5,513.082,241.5,517.082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="325.5" x2="454.5" y1="486.6797" y2="486.6797"/><polygon fill="#A80036" points="450.5,530.0664,454.5,540.0664,458.5,530.0664,454.5,534.0664" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="454.5" x2="454.5" y1="486.6797" y2="589.0508"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="454.5" x2="253.5" y1="589.0508" y2="589.0508"/><polygon fill="#A80036" points="263.5,585.0508,253.5,589.0508,263.5,593.0508,259.5,589.0508" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="557.0508" y2="577.0508"/><polygon fill="#A80036" points="237.5,567.0508,241.5,577.0508,245.5,567.0508,241.5,571.0508" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="454.6797" y2="474.6797"/><polygon fill="#A80036" points="237.5,464.6797,241.5,474.6797,245.5,464.6797,241.5,468.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="601.0508" y2="621.0508"/><polygon fill="#A80036" points="237.5,611.0508,241.5,621.0508,245.5,611.0508,241.5,615.0508" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="767.8472" y2="796.7456"/><polygon fill="#A80036" points="237.5,786.7456,241.5,796.7456,245.5,786.7456,241.5,790.7456" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="830.7144" y2="850.7144"/><polygon fill="#A80036" points="237.5,840.7144,241.5,850.7144,245.5,840.7144,241.5,844.7144" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="702.168" y2="733.8784"/><polygon fill="#A80036" points="237.5,723.8784,241.5,733.8784,245.5,723.8784,241.5,727.8784" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="884.6831" y2="894.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="527.5" y1="894.6831" y2="894.6831"/><polygon fill="#A80036" points="523.5,805.3276,527.5,795.3276,531.5,805.3276,527.5,801.3276" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="527.5" x2="527.5" y1="690.168" y2="894.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="527.5" x2="378.5" y1="690.168" y2="690.168"/><polygon fill="#A80036" points="388.5,686.168,378.5,690.168,388.5,694.168,384.5,690.168" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="104.5" x2="92.5" y1="690.168" y2="690.168"/><polygon fill="#A80036" points="88.5,791.3276,92.5,801.3276,96.5,791.3276,92.5,795.3276" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="92.5" x2="92.5" y1="690.168" y2="906.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="92.5" x2="241.5" y1="906.6831" y2="906.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="906.6831" y2="926.6831"/><polygon fill="#A80036" points="237.5,916.6831,241.5,926.6831,245.5,916.6831,241.5,920.6831" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="655.0195" y2="678.168"/><polygon fill="#A80036" points="237.5,668.168,241.5,678.168,245.5,668.168,241.5,672.168" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="229" x2="198" y1="1019.4878" y2="1019.4878"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="198" x2="198" y1="1019.4878" y2="1041.4878"/><polygon fill="#A80036" points="194,1031.4878,198,1041.4878,202,1031.4878,198,1035.4878" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="363" x2="394" y1="1019.4878" y2="1019.4878"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="394" x2="394" y1="1019.4878" y2="1041.4878"/><polygon fill="#A80036" points="390,1031.4878,394,1041.4878,398,1031.4878,394,1035.4878" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="198" x2="198" y1="1075.4565" y2="1093.4565"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="198" x2="284" y1="1093.4565" y2="1093.4565"/><polygon fill="#A80036" points="274,1089.4565,284,1093.4565,274,1097.4565,278,1093.4565" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="394" x2="394" y1="1075.4565" y2="1093.4565"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="394" x2="308" y1="1093.4565" y2="1093.4565"/><polygon fill="#A80036" points="318,1089.4565,308,1093.4565,318,1097.4565,314,1093.4565" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="653.5" x2="653.5" y1="1031.4878" y2="1068.2925"/><polygon fill="#A80036" points="649.5,1058.2925,653.5,1068.2925,657.5,1058.2925,653.5,1062.2925" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="653.5" x2="653.5" y1="1102.2612" y2="1114.2612"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="653.5" x2="800" y1="1114.2612" y2="1114.2612"/><polygon fill="#A80036" points="796,1076.8745,800,1066.8745,804,1076.8745,800,1072.8745" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="800" x2="800" y1="1019.4878" y2="1114.2612"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="800" x2="696.5" y1="1019.4878" y2="1019.4878"/><polygon fill="#A80036" points="706.5,1015.4878,696.5,1019.4878,706.5,1023.4878,702.5,1019.4878" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="610.5" x2="507" y1="1019.4878" y2="1019.4878"/><polygon fill="#A80036" points="503,1062.8745,507,1072.8745,511,1062.8745,507,1066.8745" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="507" x2="507" y1="1019.4878" y2="1126.2612"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="507" x2="653.5" y1="1126.2612" y2="1126.2612"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="653.5" x2="653.5" y1="1126.2612" y2="1146.2612"/><polygon fill="#A80036" points="649.5,1136.2612,653.5,1146.2612,657.5,1136.2612,653.5,1140.2612" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="341" x2="296" y1="972.6831" y2="972.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="296" x2="296" y1="972.6831" y2="1007.4878"/><polygon fill="#A80036" points="292,997.4878,296,1007.4878,300,997.4878,296,1001.4878" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="296" y="993.8936">yes</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="554" x2="653.5" y1="972.6831" y2="972.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="653.5" x2="653.5" y1="972.6831" y2="1007.4878"/><polygon fill="#A80036" points="649.5,997.4878,653.5,1007.4878,657.5,997.4878,653.5,1001.4878" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="653.5" y="993.8936">no</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="296" x2="296" y1="1105.4565" y2="1202.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="296" x2="435.5" y1="1202.23" y2="1202.23"/><polygon fill="#A80036" points="425.5,1198.23,435.5,1202.23,425.5,1206.23,429.5,1202.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="653.5" x2="653.5" y1="1180.23" y2="1202.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="653.5" x2="459.5" y1="1202.23" y2="1202.23"/><polygon fill="#A80036" points="469.5,1198.23,459.5,1202.23,469.5,1206.23,465.5,1202.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="182" x2="35.5" y1="938.6831" y2="938.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="35.5" x2="35.5" y1="938.6831" y2="960.6831"/><polygon fill="#A80036" points="31.5,950.6831,35.5,960.6831,39.5,950.6831,35.5,954.6831" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="301" x2="447.5" y1="938.6831" y2="938.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="447.5" x2="447.5" y1="938.6831" y2="960.6831"/><polygon fill="#A80036" points="443.5,950.6831,447.5,960.6831,451.5,950.6831,447.5,954.6831" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="35.5" x2="35.5" y1="994.6519" y2="1232.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="35.5" x2="229.5" y1="1232.23" y2="1232.23"/><polygon fill="#A80036" points="219.5,1228.23,229.5,1232.23,219.5,1236.23,223.5,1232.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="447.5" x2="447.5" y1="1214.23" y2="1232.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="447.5" x2="253.5" y1="1232.23" y2="1232.23"/><polygon fill="#A80036" points="263.5,1228.23,253.5,1232.23,263.5,1236.23,259.5,1232.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="469.25" x2="241.5" y1="344.7422" y2="344.7422"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="344.7422" y2="366.7422"/><polygon fill="#A80036" points="237.5,356.7422,241.5,366.7422,245.5,356.7422,241.5,360.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="681.25" x2="909" y1="344.7422" y2="344.7422"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="909" x2="909" y1="344.7422" y2="366.7422"/><polygon fill="#A80036" points="905,356.7422,909,366.7422,913,356.7422,909,360.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="1244.23" y2="1262.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="563.25" y1="1262.23" y2="1262.23"/><polygon fill="#A80036" points="553.25,1258.23,563.25,1262.23,553.25,1266.23,557.25,1262.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="909" x2="909" y1="400.7109" y2="1262.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="909" x2="587.25" y1="1262.23" y2="1262.23"/><polygon fill="#A80036" points="597.25,1258.23,587.25,1262.23,597.25,1266.23,593.25,1262.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="716.875" x2="575.25" y1="310.7422" y2="310.7422"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="575.25" x2="575.25" y1="310.7422" y2="332.7422"/><polygon fill="#A80036" points="571.25,322.7422,575.25,332.7422,579.25,322.7422,575.25,326.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="914.875" x2="1053.875" y1="310.7422" y2="310.7422"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1053.875" x2="1053.875" y1="310.7422" y2="332.7422"/><polygon fill="#A80036" points="1049.875,322.7422,1053.875,332.7422,1057.875,322.7422,1053.875,326.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="575.25" x2="575.25" y1="1274.23" y2="1292.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="575.25" x2="803.875" y1="1292.23" y2="1292.23"/><polygon fill="#A80036" points="793.875,1288.23,803.875,1292.23,793.875,1296.23,797.875,1292.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1053.875" x2="1053.875" y1="366.7109" y2="1292.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1053.875" x2="827.875" y1="1292.23" y2="1292.23"/><polygon fill="#A80036" points="837.875,1288.23,827.875,1292.23,837.875,1296.23,833.875,1292.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="815.875" x2="815.875" y1="278.7422" y2="298.7422"/><polygon fill="#A80036" points="811.875,288.7422,815.875,298.7422,819.875,288.7422,815.875,292.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="815.875" x2="815.875" y1="166.4023" y2="190.8047"/><polygon fill="#A80036" points="811.875,180.8047,815.875,190.8047,819.875,180.8047,815.875,184.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="977.875" x2="1120.375" y1="154.4023" y2="154.4023"/><polygon fill="#A80036" points="1116.375,762.7456,1120.375,772.7456,1124.375,762.7456,1120.375,766.7456" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1120.375" x2="1120.375" y1="154.4023" y2="1336.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1120.375" x2="827.875" y1="1336.23" y2="1336.23"/><polygon fill="#A80036" points="837.875,1332.23,827.875,1336.23,837.875,1340.23,833.875,1336.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="815.875" x2="815.875" y1="1304.23" y2="1324.23"/><polygon fill="#A80036" points="811.875,1314.23,815.875,1324.23,819.875,1314.23,815.875,1318.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="815.875" x2="815.875" y1="118" y2="142.4023"/><polygon fill="#A80036" points="811.875,132.4023,815.875,142.4023,819.875,132.4023,815.875,136.4023" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="880.375" x2="1138.375" y1="106" y2="106"/><polygon fill="#A80036" points="1134.375,762.7456,1138.375,772.7456,1142.375,762.7456,1138.375,766.7456" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1138.375" x2="1138.375" y1="106" y2="1380.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1138.375" x2="827.875" y1="1380.23" y2="1380.23"/><polygon fill="#A80036" points="837.875,1376.23,827.875,1380.23,837.875,1384.23,833.875,1380.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="815.875" x2="815.875" y1="1348.23" y2="1368.23"/><polygon fill="#A80036" points="811.875,1358.23,815.875,1368.23,819.875,1358.23,815.875,1362.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="815.875" x2="815.875" y1="74" y2="94"/><polygon fill="#A80036" points="811.875,84,815.875,94,819.875,84,815.875,88" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="815.875" x2="815.875" y1="1392.23" y2="1440.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="815.875" x2="1156.375" y1="1440.23" y2="1440.23"/><polygon fill="#A80036" points="1152.375,776.7456,1156.375,766.7456,1160.375,776.7456,1156.375,772.7456" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1156.375" x2="1156.375" y1="62" y2="1440.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1156.375" x2="827.875" y1="62" y2="62"/><polygon fill="#A80036" points="837.875,58,827.875,62,837.875,66,833.875,62" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="815.875" x2="815.875" y1="30" y2="50"/><polygon fill="#A80036" points="811.875,40,815.875,50,819.875,40,815.875,44" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e32a48e01a48fbba573b2dd3ea9aea98]
@startuml technical-workflow
start
repeat
if (incoming request?) then (yes)
    if (request is valid and corresponds to a merge action?) then (yes)
        :fetch properties from the MergeRequestEvent object;
        :try to read nextMainBranch from configuration file;
        if (nextMainBranch is configured?) then (yes)
            if (nextMainBranch exists remotely?) then (yes)
                :create new branch from targetBranch;
                :create new MR from the new branch into the nextMainBranch;
                if (apiTokenApprover is set?) then (yes)
                    :approve the just created MR as that user (apiTokenApprover);
                else (no)
                endif
                #SkyBlue:initialize countDown to 100;
                note right 
                    Timeout to avoid the possibility
                    of getting stuck in the loop forever
                end note
                while(MRStatus is "checking" and countdown > 0?) is (yes)
                    #SkyBlue:decrement countDown by 1;
                    :sleep 100ms;
                    note right: Wait for Gitlab to prepare MR
                    :update MRStatus from Gitlab;
                endwhile (no)
                if (countDown == 0) then (yes) 
                    :error;
                else (no)
                    switch(Is MRStatus == can_be_merged?)
                    case (yes)
                        if (MR has pipeline(s)?) then (yes)
                            :merge when pipeline succeeds;
                        else (no)
                            :merge immediately;
                        endif
                    case (no)
                        while(MR merger) is (ucascade user)
                            :get user that merged the preceding MR;
                        endwhile (not the ucascade user)
                        :update MR to set its assignee to the MR merger;
                    endswitch
                endif
            else (no)
                #red:discard with error;
            endif
            else (no)
                :nothing to do;
        endif
    endif
endif
repeat while
@enduml

PlantUML version 1.2020.06(Sun Apr 05 12:38:32 GMT 2020)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.18+10
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>