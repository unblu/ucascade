<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1529px" preserveAspectRatio="none" style="width:1449px;height:1529px;" version="1.1" viewBox="0 0 1449 1529" width="1449px" zoomAndPan="magnify"><defs><filter height="300%" id="f1su9iln2oj78w" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="1031.9375" cy="20" fill="#000000" filter="url(#f1su9iln2oj78w)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="351" x="856.4375" y="190.8047"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="331" x="866.4375" y="211.9434">fetch properties from the MergeRequestEvent object</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="967.4375,244.7734,1096.4375,244.7734,1108.4375,256.7734,1096.4375,268.7734,967.4375,268.7734,955.4375,256.7734,967.4375,244.7734" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="967.4375" y="260.5815">merge-request action?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="916.4375" y="254.1792">MERGE</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="1108.4375" y="254.1792">CLOSE</text><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="331" x="650.375" y="278.7734"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="311" x="660.375" y="299.9121">try to read nextMainBranch from configuration file</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="728.875,332.7422,902.875,332.7422,914.875,344.7422,902.875,356.7422,728.875,356.7422,716.875,344.7422,728.875,332.7422" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="174" x="728.875" y="348.5503">nextMainBranch is configured?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="696.875" y="342.1479">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="914.875" y="342.1479">no</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="481.25,366.7422,669.25,366.7422,681.25,378.7422,669.25,390.7422,481.25,390.7422,469.25,378.7422,481.25,366.7422" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="188" x="481.25" y="382.5503">nextMainBranch exists remotely?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="449.25" y="376.1479">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="681.25" y="376.1479">no</text><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="257" x="113" y="400.7422"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="237" x="123" y="421.8809">create new branch from targetBranch</text><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="403" x="40" y="469.7109"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="383" x="50" y="490.8496">create new MR from the new branch into the nextMainBranch</text><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="406" x="38.5" y="572.082"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="386" x="48.5" y="593.2207">approve the just created MR as that user (apiTokenApprover)</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="169.5,523.6797,313.5,523.6797,325.5,535.6797,313.5,547.6797,169.5,547.6797,157.5,535.6797,169.5,523.6797" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="245.5" y="557.8901">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="169.5" y="539.4878">apiTokenApprover is set?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="325.5" y="533.0854">no</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="241.5,626.0508,253.5,638.0508,241.5,650.0508,229.5,638.0508,241.5,626.0508" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M355.5,666.9023 L355.5,683.0352 L335.5,687.0352 L355.5,691.0352 L355.5,707.168 A0,0 0 0 0 355.5,707.168 L595.5,707.168 A0,0 0 0 0 595.5,707.168 L595.5,676.9023 L585.5,666.9023 L355.5,666.9023 A0,0 0 0 0 355.5,666.9023 " fill="#FBFB77" filter="url(#f1su9iln2oj78w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M585.5,666.9023 L585.5,676.9023 L595.5,676.9023 L585.5,666.9023 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="361.5" y="683.9692">Timeout to avoid the possibility</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="361.5" y="699.1021">of getting stuck in the loop forever</text><rect fill="#87CEEB" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="188" x="147.5" y="670.0508"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="168" x="157.5" y="691.1895">initialize countDown to 100</text><rect fill="#87CEEB" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="192" x="145.5" y="782.8784"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="172" x="155.5" y="804.0171">decrement countDown by 1</text><path d="M311.5,848.1636 L311.5,856.73 L291.5,860.73 L311.5,864.73 L311.5,873.2964 A0,0 0 0 0 311.5,873.2964 L515.5,873.2964 A0,0 0 0 0 515.5,873.2964 L515.5,858.1636 L505.5,848.1636 L311.5,848.1636 A0,0 0 0 0 311.5,848.1636 " fill="#FBFB77" filter="url(#f1su9iln2oj78w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M505.5,848.1636 L505.5,858.1636 L515.5,858.1636 L505.5,848.1636 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="317.5" y="865.2305">Wait for Gitlab to prepare MR</text><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="191.5" y="843.7456"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="80" x="201.5" y="864.8843">sleep 100ms</text><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="200" x="141.5" y="897.7144"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="180" x="151.5" y="918.853">update MRStatus from Gitlab</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="116.5,727.168,366.5,727.168,378.5,739.168,366.5,751.168,116.5,751.168,104.5,739.168,116.5,727.168" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="245.5" y="761.3784">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="250" x="116.5" y="742.9761">MRStatus is "checking" and countdown &gt; 0?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="90.5" y="736.5737">no</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="194,973.6831,289,973.6831,301,985.6831,289,997.6831,194,997.6831,182,985.6831,194,973.6831" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="194" y="989.4912">countDown == 0</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="162" y="983.0889">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="301" y="983.0889">no</text><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="10" y="1007.6831"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="31" x="20" y="1028.8218">error</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="353,1007.6831,542,1007.6831,554,1019.6831,542,1031.6831,353,1031.6831,341,1019.6831,353,1007.6831" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="353" y="1023.4912">Is MRStatus == can_be_merged?</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="241,1054.4878,351,1054.4878,363,1066.4878,351,1078.4878,241,1078.4878,229,1066.4878,241,1054.4878" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="110" x="241" y="1070.2959">MR has pipeline(s)?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="209" y="1063.8936">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="363" y="1063.8936">no</text><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="91" y="1088.4878"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="194" x="101" y="1109.6265">merge when pipeline succeeds</text><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="325" y="1088.4878"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="118" x="335" y="1109.6265">merge immediately</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="296,1128.4565,308,1140.4565,296,1152.4565,284,1140.4565,296,1128.4565" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="269" x="519" y="1115.2925"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="249" x="529" y="1136.4312">get user that merged the preceding MR</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="622.5,1054.4878,684.5,1054.4878,696.5,1066.4878,684.5,1078.4878,622.5,1078.4878,610.5,1066.4878,622.5,1054.4878" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="657.5" y="1088.6982">ucascade user</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="622.5" y="1070.2959">MR merger</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="482.5" y="1063.8936">not the ucascade user</text><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="321" x="493" y="1193.2612"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="301" x="503" y="1214.3999">update MR to set its assignee to the MR merger</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="447.5,1237.23,447.5,1237.23,459.5,1249.23,447.5,1261.23,447.5,1261.23,435.5,1249.23,447.5,1237.23" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="241.5,1267.23,253.5,1279.23,241.5,1291.23,229.5,1279.23,241.5,1267.23" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FF0000" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="844" y="400.7422"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="110" x="854" y="421.8809">discard with error</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="575.25,1297.23,587.25,1309.23,575.25,1321.23,563.25,1309.23,575.25,1297.23" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="1004" y="366.7422"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="1014" y="387.8809">nothing to do</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="815.875,1327.23,827.875,1339.23,815.875,1351.23,803.875,1339.23,815.875,1327.23" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="177" x="1159.5" y="278.7734"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="157" x="1169.5" y="299.9121">delete MR source branch</text><rect fill="#FEFECE" filter="url(#f1su9iln2oj78w)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="1149" y="381.1445"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="178" x="1159" y="402.2832">merge oldest concurrent MR</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="1151,332.7422,1345,332.7422,1357,344.7422,1345,356.7422,1151,356.7422,1139,344.7422,1151,332.7422" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="1252" y="366.9526">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="194" x="1151" y="348.5503">concurrent open auto MR(s) exist?</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="1248,439.5156,1260,451.5156,1248,463.5156,1236,451.5156,1248,439.5156" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="1031.9375,1357.23,1043.9375,1369.23,1031.9375,1381.23,1019.9375,1369.23,1031.9375,1357.23" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="984.9375,142.4023,1078.9375,142.4023,1090.9375,154.4023,1078.9375,166.4023,984.9375,166.4023,972.9375,154.4023,984.9375,142.4023" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="1035.9375" y="176.6128">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="984.9375" y="158.2104">request is valid?</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="1031.9375,1401.23,1043.9375,1413.23,1031.9375,1425.23,1019.9375,1413.23,1031.9375,1401.23" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="979.4375,94,1084.4375,94,1096.4375,106,1084.4375,118,979.4375,118,967.4375,106,979.4375,94" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="1035.9375" y="128.2104">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="979.4375" y="109.8081">incoming request?</text><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="1031.9375,1445.23,1043.9375,1457.23,1031.9375,1469.23,1019.9375,1457.23,1031.9375,1445.23" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1su9iln2oj78w)" points="1031.9375,50,1043.9375,62,1031.9375,74,1019.9375,62,1031.9375,50" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="434.7109" y2="469.7109"/><polygon fill="#A80036" points="237.5,459.7109,241.5,469.7109,245.5,459.7109,241.5,463.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="547.6797" y2="572.082"/><polygon fill="#A80036" points="237.5,562.082,241.5,572.082,245.5,562.082,241.5,566.082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="325.5" x2="454.5" y1="535.6797" y2="535.6797"/><polygon fill="#A80036" points="450.5,579.0664,454.5,589.0664,458.5,579.0664,454.5,583.0664" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="454.5" x2="454.5" y1="535.6797" y2="638.0508"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="454.5" x2="253.5" y1="638.0508" y2="638.0508"/><polygon fill="#A80036" points="263.5,634.0508,253.5,638.0508,263.5,642.0508,259.5,638.0508" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="606.0508" y2="626.0508"/><polygon fill="#A80036" points="237.5,616.0508,241.5,626.0508,245.5,616.0508,241.5,620.0508" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="503.6797" y2="523.6797"/><polygon fill="#A80036" points="237.5,513.6797,241.5,523.6797,245.5,513.6797,241.5,517.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="650.0508" y2="670.0508"/><polygon fill="#A80036" points="237.5,660.0508,241.5,670.0508,245.5,660.0508,241.5,664.0508" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="816.8472" y2="843.7456"/><polygon fill="#A80036" points="237.5,833.7456,241.5,843.7456,245.5,833.7456,241.5,837.7456" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="877.7144" y2="897.7144"/><polygon fill="#A80036" points="237.5,887.7144,241.5,897.7144,245.5,887.7144,241.5,891.7144" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="751.168" y2="782.8784"/><polygon fill="#A80036" points="237.5,772.8784,241.5,782.8784,245.5,772.8784,241.5,776.8784" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="931.6831" y2="941.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="527.5" y1="941.6831" y2="941.6831"/><polygon fill="#A80036" points="523.5,852.3276,527.5,842.3276,531.5,852.3276,527.5,848.3276" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="527.5" x2="527.5" y1="739.168" y2="941.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="527.5" x2="378.5" y1="739.168" y2="739.168"/><polygon fill="#A80036" points="388.5,735.168,378.5,739.168,388.5,743.168,384.5,739.168" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="104.5" x2="92.5" y1="739.168" y2="739.168"/><polygon fill="#A80036" points="88.5,838.3276,92.5,848.3276,96.5,838.3276,92.5,842.3276" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="92.5" x2="92.5" y1="739.168" y2="953.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="92.5" x2="241.5" y1="953.6831" y2="953.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="953.6831" y2="973.6831"/><polygon fill="#A80036" points="237.5,963.6831,241.5,973.6831,245.5,963.6831,241.5,967.6831" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="704.0195" y2="727.168"/><polygon fill="#A80036" points="237.5,717.168,241.5,727.168,245.5,717.168,241.5,721.168" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="229" x2="198" y1="1066.4878" y2="1066.4878"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="198" x2="198" y1="1066.4878" y2="1088.4878"/><polygon fill="#A80036" points="194,1078.4878,198,1088.4878,202,1078.4878,198,1082.4878" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="363" x2="394" y1="1066.4878" y2="1066.4878"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="394" x2="394" y1="1066.4878" y2="1088.4878"/><polygon fill="#A80036" points="390,1078.4878,394,1088.4878,398,1078.4878,394,1082.4878" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="198" x2="198" y1="1122.4565" y2="1140.4565"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="198" x2="284" y1="1140.4565" y2="1140.4565"/><polygon fill="#A80036" points="274,1136.4565,284,1140.4565,274,1144.4565,278,1140.4565" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="394" x2="394" y1="1122.4565" y2="1140.4565"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="394" x2="308" y1="1140.4565" y2="1140.4565"/><polygon fill="#A80036" points="318,1136.4565,308,1140.4565,318,1144.4565,314,1140.4565" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="653.5" x2="653.5" y1="1078.4878" y2="1115.2925"/><polygon fill="#A80036" points="649.5,1105.2925,653.5,1115.2925,657.5,1105.2925,653.5,1109.2925" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="653.5" x2="653.5" y1="1149.2612" y2="1161.2612"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="653.5" x2="800" y1="1161.2612" y2="1161.2612"/><polygon fill="#A80036" points="796,1123.8745,800,1113.8745,804,1123.8745,800,1119.8745" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="800" x2="800" y1="1066.4878" y2="1161.2612"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="800" x2="696.5" y1="1066.4878" y2="1066.4878"/><polygon fill="#A80036" points="706.5,1062.4878,696.5,1066.4878,706.5,1070.4878,702.5,1066.4878" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="610.5" x2="507" y1="1066.4878" y2="1066.4878"/><polygon fill="#A80036" points="503,1109.8745,507,1119.8745,511,1109.8745,507,1113.8745" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="507" x2="507" y1="1066.4878" y2="1173.2612"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="507" x2="653.5" y1="1173.2612" y2="1173.2612"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="653.5" x2="653.5" y1="1173.2612" y2="1193.2612"/><polygon fill="#A80036" points="649.5,1183.2612,653.5,1193.2612,657.5,1183.2612,653.5,1187.2612" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="341" x2="296" y1="1019.6831" y2="1019.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="296" x2="296" y1="1019.6831" y2="1054.4878"/><polygon fill="#A80036" points="292,1044.4878,296,1054.4878,300,1044.4878,296,1048.4878" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="296" y="1040.8936">yes</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="554" x2="653.5" y1="1019.6831" y2="1019.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="653.5" x2="653.5" y1="1019.6831" y2="1054.4878"/><polygon fill="#A80036" points="649.5,1044.4878,653.5,1054.4878,657.5,1044.4878,653.5,1048.4878" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="653.5" y="1040.8936">no</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="296" x2="296" y1="1152.4565" y2="1249.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="296" x2="435.5" y1="1249.23" y2="1249.23"/><polygon fill="#A80036" points="425.5,1245.23,435.5,1249.23,425.5,1253.23,429.5,1249.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="653.5" x2="653.5" y1="1227.23" y2="1249.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="653.5" x2="459.5" y1="1249.23" y2="1249.23"/><polygon fill="#A80036" points="469.5,1245.23,459.5,1249.23,469.5,1253.23,465.5,1249.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="182" x2="35.5" y1="985.6831" y2="985.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="35.5" x2="35.5" y1="985.6831" y2="1007.6831"/><polygon fill="#A80036" points="31.5,997.6831,35.5,1007.6831,39.5,997.6831,35.5,1001.6831" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="301" x2="447.5" y1="985.6831" y2="985.6831"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="447.5" x2="447.5" y1="985.6831" y2="1007.6831"/><polygon fill="#A80036" points="443.5,997.6831,447.5,1007.6831,451.5,997.6831,447.5,1001.6831" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="35.5" x2="35.5" y1="1041.6519" y2="1279.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="35.5" x2="229.5" y1="1279.23" y2="1279.23"/><polygon fill="#A80036" points="219.5,1275.23,229.5,1279.23,219.5,1283.23,223.5,1279.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="447.5" x2="447.5" y1="1261.23" y2="1279.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="447.5" x2="253.5" y1="1279.23" y2="1279.23"/><polygon fill="#A80036" points="263.5,1275.23,253.5,1279.23,263.5,1283.23,259.5,1279.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="469.25" x2="241.5" y1="378.7422" y2="378.7422"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="378.7422" y2="400.7422"/><polygon fill="#A80036" points="237.5,390.7422,241.5,400.7422,245.5,390.7422,241.5,394.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="681.25" x2="909" y1="378.7422" y2="378.7422"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="909" x2="909" y1="378.7422" y2="400.7422"/><polygon fill="#A80036" points="905,390.7422,909,400.7422,913,390.7422,909,394.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="241.5" y1="1291.23" y2="1309.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="241.5" x2="563.25" y1="1309.23" y2="1309.23"/><polygon fill="#A80036" points="553.25,1305.23,563.25,1309.23,553.25,1313.23,557.25,1309.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="909" x2="909" y1="434.7109" y2="1309.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="909" x2="587.25" y1="1309.23" y2="1309.23"/><polygon fill="#A80036" points="597.25,1305.23,587.25,1309.23,597.25,1313.23,593.25,1309.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="716.875" x2="575.25" y1="344.7422" y2="344.7422"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="575.25" x2="575.25" y1="344.7422" y2="366.7422"/><polygon fill="#A80036" points="571.25,356.7422,575.25,366.7422,579.25,356.7422,575.25,360.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="914.875" x2="1056.5" y1="344.7422" y2="344.7422"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1056.5" x2="1056.5" y1="344.7422" y2="366.7422"/><polygon fill="#A80036" points="1052.5,356.7422,1056.5,366.7422,1060.5,356.7422,1056.5,360.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="575.25" x2="575.25" y1="1321.23" y2="1339.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="575.25" x2="803.875" y1="1339.23" y2="1339.23"/><polygon fill="#A80036" points="793.875,1335.23,803.875,1339.23,793.875,1343.23,797.875,1339.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1056.5" x2="1056.5" y1="400.7109" y2="1339.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1056.5" x2="827.875" y1="1339.23" y2="1339.23"/><polygon fill="#A80036" points="837.875,1335.23,827.875,1339.23,837.875,1343.23,833.875,1339.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="815.875" x2="815.875" y1="312.7422" y2="332.7422"/><polygon fill="#A80036" points="811.875,322.7422,815.875,332.7422,819.875,322.7422,815.875,326.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1248" x2="1248" y1="356.7422" y2="381.1445"/><polygon fill="#A80036" points="1244,371.1445,1248,381.1445,1252,371.1445,1248,375.1445" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1357" x2="1369" y1="344.7422" y2="344.7422"/><polygon fill="#A80036" points="1365,388.1289,1369,398.1289,1373,388.1289,1369,392.1289" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1369" x2="1369" y1="344.7422" y2="451.5156"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1369" x2="1260" y1="451.5156" y2="451.5156"/><polygon fill="#A80036" points="1270,447.5156,1260,451.5156,1270,455.5156,1266,451.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1248" x2="1248" y1="415.1133" y2="439.5156"/><polygon fill="#A80036" points="1244,429.5156,1248,439.5156,1252,429.5156,1248,433.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1248" x2="1248" y1="312.7422" y2="332.7422"/><polygon fill="#A80036" points="1244,322.7422,1248,332.7422,1252,322.7422,1248,326.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="955.4375" x2="815.875" y1="256.7734" y2="256.7734"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="815.875" x2="815.875" y1="256.7734" y2="278.7734"/><polygon fill="#A80036" points="811.875,268.7734,815.875,278.7734,819.875,268.7734,815.875,272.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1108.4375" x2="1248" y1="256.7734" y2="256.7734"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1248" x2="1248" y1="256.7734" y2="278.7734"/><polygon fill="#A80036" points="1244,268.7734,1248,278.7734,1252,268.7734,1248,272.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="815.875" x2="815.875" y1="1351.23" y2="1369.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="815.875" x2="1019.9375" y1="1369.23" y2="1369.23"/><polygon fill="#A80036" points="1009.9375,1365.23,1019.9375,1369.23,1009.9375,1373.23,1013.9375,1369.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1248" x2="1248" y1="463.5156" y2="1369.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1248" x2="1043.9375" y1="1369.23" y2="1369.23"/><polygon fill="#A80036" points="1053.9375,1365.23,1043.9375,1369.23,1053.9375,1373.23,1049.9375,1369.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1031.9375" x2="1031.9375" y1="224.7734" y2="244.7734"/><polygon fill="#A80036" points="1027.9375,234.7734,1031.9375,244.7734,1035.9375,234.7734,1031.9375,238.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1031.9375" x2="1031.9375" y1="166.4023" y2="190.8047"/><polygon fill="#A80036" points="1027.9375,180.8047,1031.9375,190.8047,1035.9375,180.8047,1031.9375,184.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1090.9375" x2="1387" y1="154.4023" y2="154.4023"/><polygon fill="#A80036" points="1383,809.7456,1387,819.7456,1391,809.7456,1387,813.7456" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1387" x2="1387" y1="154.4023" y2="1413.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1387" x2="1043.9375" y1="1413.23" y2="1413.23"/><polygon fill="#A80036" points="1053.9375,1409.23,1043.9375,1413.23,1053.9375,1417.23,1049.9375,1413.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1031.9375" x2="1031.9375" y1="1381.23" y2="1401.23"/><polygon fill="#A80036" points="1027.9375,1391.23,1031.9375,1401.23,1035.9375,1391.23,1031.9375,1395.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1031.9375" x2="1031.9375" y1="118" y2="142.4023"/><polygon fill="#A80036" points="1027.9375,132.4023,1031.9375,142.4023,1035.9375,132.4023,1031.9375,136.4023" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1096.4375" x2="1405" y1="106" y2="106"/><polygon fill="#A80036" points="1401,809.7456,1405,819.7456,1409,809.7456,1405,813.7456" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1405" x2="1405" y1="106" y2="1457.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1405" x2="1043.9375" y1="1457.23" y2="1457.23"/><polygon fill="#A80036" points="1053.9375,1453.23,1043.9375,1457.23,1053.9375,1461.23,1049.9375,1457.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1031.9375" x2="1031.9375" y1="1425.23" y2="1445.23"/><polygon fill="#A80036" points="1027.9375,1435.23,1031.9375,1445.23,1035.9375,1435.23,1031.9375,1439.23" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1031.9375" x2="1031.9375" y1="74" y2="94"/><polygon fill="#A80036" points="1027.9375,84,1031.9375,94,1035.9375,84,1031.9375,88" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1031.9375" x2="1031.9375" y1="1469.23" y2="1517.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1031.9375" x2="1423" y1="1517.23" y2="1517.23"/><polygon fill="#A80036" points="1419,823.7456,1423,813.7456,1427,823.7456,1423,819.7456" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1423" x2="1423" y1="62" y2="1517.23"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1423" x2="1043.9375" y1="62" y2="62"/><polygon fill="#A80036" points="1053.9375,58,1043.9375,62,1053.9375,66,1049.9375,62" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1031.9375" x2="1031.9375" y1="30" y2="50"/><polygon fill="#A80036" points="1027.9375,40,1031.9375,50,1035.9375,40,1031.9375,44" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f17ba9d235f73e97631f81af50a2e4f2]
@startuml technical-workflow
start
repeat
if (incoming request?) then (yes)
    if (request is valid?) then (yes)
        :fetch properties from the MergeRequestEvent object;
        if (merge-request action?) then (MERGE)
            :try to read nextMainBranch from configuration file;
            if (nextMainBranch is configured?) then (yes)
                if (nextMainBranch exists remotely?) then (yes)
                    :create new branch from targetBranch;
                    :create new MR from the new branch into the nextMainBranch;
                    if (apiTokenApprover is set?) then (yes)
                        :approve the just created MR as that user (apiTokenApprover);
                    else (no)
                    endif
                    #SkyBlue:initialize countDown to 100;
                    note right 
                        Timeout to avoid the possibility
                        of getting stuck in the loop forever
                    end note
                    while(MRStatus is "checking" and countdown > 0?) is (yes)
                        #SkyBlue:decrement countDown by 1;
                        :sleep 100ms;
                        note right: Wait for Gitlab to prepare MR
                        :update MRStatus from Gitlab;
                    endwhile (no)
                    if (countDown == 0) then (yes) 
                        :error;
                    else (no)
                        switch(Is MRStatus == can_be_merged?)
                        case (yes)
                            if (MR has pipeline(s)?) then (yes)
                                :merge when pipeline succeeds;
                            else (no)
                                :merge immediately;
                            endif
                        case (no)
                            while(MR merger) is (ucascade user)
                                :get user that merged the preceding MR;
                            endwhile (not the ucascade user)
                            :update MR to set its assignee to the MR merger;
                        endswitch
                    endif
                else (no)
                    #red:discard with error;
                endif
                else (no)
                    :nothing to do;
            endif
        else (CLOSE)
            :delete MR source branch;
            if (concurrent open auto MR(s) exist?) then (yes)
                :merge oldest concurrent MR;
            endif
        endif
    endif
endif
repeat while
@enduml

PlantUML version 1.2020.06(Sun Apr 05 12:38:32 GMT 2020)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.18+10
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>